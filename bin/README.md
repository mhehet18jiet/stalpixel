# Классы проекта и MVC паттерн в реализации

## MVC паттерн

  Костяком всего проекта станут три составляющие MVC: `View` `Control` `Model`.
Их задачи и функционал распределены в минимально возможном уоличестве класов классов таким образом,
чтобы можно было гибко редактировать отдельные элементы без серьезных последствий.

- Давайте посмотрим на них подробнее.

### View

В стартовом классе `Game1` уже предусмотрен весь функционал, который должен быть у `View`.
Фактически мы передаем в него все данные для метода `Draw`из `Model`, которые были собраны в единый GameManager.
А сам `Game1` выводит их в инициализированное окно.

### Control

Функционал сбора действий от игрока предоставлен классу `InputManager` в папке `_Managers`.

Он обладает публичными полями в которые и записываются действия игрока, а после проверяются в методе `Update` класса `GameManager`.
Таким образом мы получаем данные о фидбеке не внутри ядра `Model`, соблюдая приципы структуры MVC.

### Model

Самый объемный и насыщенный раздел MVC в этом проекте. Его можно разделить на две части: `Manager's` и `Core`.
#### Core

`Core` - классы вмещают в себе базовые представления о спрайтах, сущностях, партиклах и прочем. 
Они содержат базовую логику одиночных объектов. 

`Globals.cs` - содержит в себе информацию о игровом времени, границах карты, стандартных инструментах для отрисовки объектов и загрузке моделей или спрайтов.

`Usings` - содержит все globals usings дирректории. В них входят разделы Xna-фреймворка.

`Sprite` - основной класс для отрисовки. Определяет метод Draw для всех классов в дальнейшем и хранит общую информацию про изображение.

`MovingSprite` - наследует `Sprite` и хранит в себе характеристику скорости для подвижных спрайтов.

`Animation` - класс анимаций, который оперделяет сам обхект анимации и логику ее проигрывания.

`Anomaly` - класс, реализующий сущность аномалий. Хранит в себе наносимый ими урон, тип урона, место расположения, анимации активной и инактивной стадии, звуковые эффекты.

`Artefacts` - класс, характеризующий артефакты. Производные от аномалий сущности. Хранит в себе методы сбора артефакто и Update.

`Background` - класс, который отрисовывает карту. Рисовать карту в ручную требовало бы весомых услилий,
поэтому мы используем рандомную генерацию ландшафта составленную из наших тайлов. 

`Boars` - класс противника. Наследует `MovingSprite`, имеет анимацию. Поскольку анимация воспроизводится по ключу,
реализован метод конвертации взгляда и направления кабана в ортоганальный вектор в полярных координатах, который и является ключом анимации.

`Experience` - класс опыта игрока. Содержит методы Update и Collect, которые в совокупности позволяют размещать и собирать опыт.

`MedKit` - класс медицины. Содержит количество востанавливаемого ХП, методы Update u Collect

`Player` - класс игрока. Содержит характеристики игрока, анимацию передвижения, оружие и артефакты, собранные во время игры.

`Weapon` - класс оружия. Содержит поля, характерные для огнестрельного оружия и методы перезарядки, выстрела, создания пули.

`Shotgun` - класс дробовика, наследует `Weapon`. Измененный выстрел в виде дроби или картечи.

`Rifle` - класс винтовки, наследует `Weapon`. Автоматическая стрельба.

`Projectile` - класс пули. Реализует логику отрисовки в полярной системе. Хранит в себе урон, время существования и тд. Во многом зависит от `ProjectileData`

`ProkectileData` - буквально данные о характеристиках пули. Они настраиваются в зависимости от вооружения, поэтому у дробовика и автомата одни и те же пули,
однако, имеющие разные паттерны стрельбы.

`Bandits` - класс противника, поведение которого идентично игроку. Он может собирать артефакты или пытаться устранить игрока. 
Владеет огнестрельным оружием и измененной моделькой.


#### Manager's

- Но разве мы станем довольствоваться единственным блоком карты или противником.

- Нет
Поэтому и существуют `Manager's` регулирующие кооперативное представление всевозможных объектов.

`AnimationManager` - анимация - это последовательность изображений. Но у модели может быть множество анимаций, а каким образом воспроизводить конкретную. 
Я использовал Dictionary и проигрывал анимацию по ключу.

`BanditsManager` - регулирует популяцию противников, спавн, характеристики в зависимости от времени игры и уровня игрока.

`BoarsManager` - идентичен менеджеру выше, но регулирует уже других противников.

`ExperienceManager` - следит за очками получаемого опыта. Их выдачей и сбором при уобийстве противника или игрока, повышает уровень игрока.

`UIManager` - выводит здоровье, патроны, артефакты, аптечки на экран.

`ProjectileManager` - следит за количеством пуль на карте и их поведением, отрисовкой. Если выстрелит игрок, то нарисует и даст характеристики пуле именно это менеджер.

`GameManager` - соединяет работу всех классов, менеджеров и Globals параметров проекта. А после передает инофрмацию метода draw во `View`
